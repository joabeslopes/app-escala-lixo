(()=>{"use strict";function e(e,t){const s=document.createElement(e);for(let e in t)s.setAttribute(e,t[e]);return s}class t{constructor(e){this.tagListaPessoas=e,this.addInputPessoa()}addInputPessoa(){const t=e("input",{type:"text",name:"nome",class:"input",placeholder:"Nome"}),s=e("span",{class:"remove"});s.innerText="X";const n=e("select",{class:"input",name:"homeOffice"}),a=e("div",{class:"separator"}),o=e("div",{name:"pessoaDiv"});var c;s.onclick=this.removeInputPessoa,c=n,fetch("/html/dias-home.html").then((e=>e.text())).then((e=>{c.innerHTML=e})),o.appendChild(t),o.appendChild(s),o.appendChild(n),o.appendChild(a),document.getElementById(this.tagListaPessoas).appendChild(o)}removeInputPessoa(e){e.srcElement.parentNode.remove()}getListaPessoas(){let e=[];const t=document.getElementById(this.tagListaPessoas).children;for(let s=0;s<t.length;s++){const n=t[s];let a=n.querySelector('input[name="nome"]').value;a=a.trim();let o=n.querySelector('select[name="homeOffice"]').value;if(0==a.length||0==o.length)return[];{const t={nome:a,homeOffice:o};e.push(t)}}return e}}class s{constructor(e){this.tagDate=e,this.dataAtual=new Date,this.addInputDate()}addInputDate(){const t=this.dataAtual.toISOString().split("T")[0],s=e("input",{type:"date",class:"input",min:t,value:t});document.getElementById(this.tagDate).appendChild(s)}getInputDate(){return document.querySelector("#"+this.tagDate+" input").value}}class n{constructor(){this.pessoas=new t("listaPessoas"),this.mydate=new s("dateSelector"),document.getElementById("addPessoa").onclick=e=>this.pessoas.addInputPessoa(),document.getElementById("enviar").onclick=e=>this.sendForm()}sendForm(){const e=this.pessoas.getListaPessoas();if(0==e.length)return alert("Preencher informação completa"),!1;const t={listaPessoas:e,ISODate:this.mydate.getInputDate()},s=JSON.stringify(t);fetch("/api/gerarEscala",{method:"POST",headers:{"Content-Type":"application/json"},body:s}).then((e=>e.json())).then(this.showEscala).catch((()=>{alert("erro na api")}))}showEscala(t){const s=document.getElementById("escalaMes");s&&s.remove();const n=t.escala,a=e("p",{class:"output"});let o="";const c=e("div",{class:"output-container",id:"escalaMes"});n.forEach((e=>{e.forEach((e=>{o+=e.dia+" - "+e.nome+"\n"})),o+="\n"})),a.innerText=o,c.appendChild(a),document.getElementById("app").appendChild(c)}}const a=document.getElementById("app"),o=document.createElement("div");fetch("/html/form.html").then((e=>e.text())).then((e=>{o.innerHTML=e,a.appendChild(o),new n}))})();
//# sourceMappingURL=main.js.map